<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <meta http-equiv="refresh" content="30">
  <style type="text/css">
    {
        {
        include "css/pico.green.min.css"
      }
    }
  </style>
  <title>Curvenote Preview Error</title>
</head>

<body>
  <main class="container">
    <h1>⚠️ Error Loading Preview</h1>
    <section>
      <p>Curvenote preview is sad. Please bear with us.</p>
      <p>Look at the Curvenote logs and see if there's an error in your DevNote or configuration that can be fixed. Once
        you fix it, the server should restart automatically. If it doesn't, close the preview tab and open the DevNote
        preview again.</p>
    </section>
    <section id="accordions">
      <h2>Logs</h2>
      <details open>
        <summary>
          <h3>Curvenote</h3>
        </summary>
        <code>
                        {{$lines := include "preview.curvenote.log" | splitList "\n"}}
                        {{range slice $lines (sub (len $lines) 20)}}
                        {{.}}<br>
                        {{end}}
                </code>
      </details>

      <details>
        <summary>
          <h3>Preview Server</h3>
        </summary>
        <code>
                        {{$lines := include "preview.log" | splitList "\n"}}
                        {{range slice $lines (sub (len $lines) 20)}}
                        {{.}}<br>
                        {{end}}
                </code>
      </details>
    </section>
  </main>

  <footer class="container">
    <hr>
    <p><small>
        {{placeholder "http.request.orig_method"}}
        {{placeholder "http.request.orig_uri"}}
        {{placeholder "http.error.status_code"}}
        {{placeholder "http.error.status_text"}}<br>
        {{placeholder "http.error.message"}}<br>
      </small></p>
  </footer>
</body>

</html>